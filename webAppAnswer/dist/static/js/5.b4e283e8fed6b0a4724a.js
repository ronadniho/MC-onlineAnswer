webpackJsonp([5],{"gO+l":function(t,e){},l1oq:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("GgDs"),n=i("AJBx"),a={name:"WaterPolo",props:["num"],data:function(){return{number:this.num}},created:function(){!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;i++)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var s=(new Date).getTime(),n=Math.max(0,16-(s-t)),a=window.setTimeout(function(){e(s+n)},n);return t=s+n,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)});var s={width:function(t){return this.isWindow(t)?window.document.documentElement.clientWidth:this.getWidthOrHeight(t,"width","content")},height:function(t){return this.isWindow(t)?window.document.documentElement.clientHeight:this.getWidthOrHeight(t,"height","content")},getWidthOrHeight:function(t,e,i){var s=this.getStyle(t),n=this.curCSS(t,e,s),a="border-box"===this.curCSS(t,"boxSizing",s);return"auto"===n&&(n=t["offset"+e[0].toUpperCase()+e.slice(1)]),(n=parseFloat(n)||0)+this.argumentWidthOrHeight(t,e,i,a,s)},getStyle:function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=window),e.getComputedStyle(t)},curCSS:function(t,e,i){var s;return i&&(s=i.getPropertyValue(e)||i[e]),s},argumentWidthOrHeight:function(t,e,i,s,n){var a,r=0,o=["Top","Right","Bottom","Left"];for(a=i===(s?"border":"content")?4:"width"===e?1:0;a<4;a+=2)"margin"===i&&(r+=parseFloat(this.curCSS(t,"margin"+o[a],n))),s?("margin"!==i&&(r-=parseFloat(this.curCSS(t,"border"+o[a]+"Width",n))),"content"===i&&(r-=parseFloat(this.curCSS(t,"padding"+o[a],n)))):("content"!==i&&(r+=parseFloat(this.curCSS(t,"padding"+o[a],n))),"border"!==i&&"margin"!==i||(r+=parseFloat(this.curCSS(t,"border"+o[a]+"Width",n))));return r},isWindow:function(t){return null!=t&&t===t.window}},n=window.Hliquid=function(t){var e,i=this.wrapper=document.getElementById(t.el);"string"==typeof i.tagName&&"canvas"===i.tagName.toLowerCase()?(e=this.canvas=i,this.h=e.height,this.w=e.width):(e=this.canvas=document.createElement("canvas"),this.w=e.width=s.width(i),this.h=e.height=s.height(i),i.appendChild(e)),e.getContext&&(this.context=e.getContext("2d"),this.offsetX=0,this.startValue=0,this.startY=this.h,this.init(t))};n.prototype.init=function(t){this.value=void 0===t.value?10:Number(t.value),this.color=t.color||"#1bb8ff",this.background=t.background,this.textSize=t.textSize,this.textColor=t.textColor||"#fff",this.borderColor=t.borderColor||this.color,this.borderWidth=t.borderWidth||2,this.borderOffset=t.borderOffset||0,this.waveHeight=t.waveHeight||5,this.waveWidth=t.waveWidth||2,this.speed=t.speed||.8,this.anime="boolean"!=typeof t.anime||t.anime,this.maxStyle=t.maxStyle,this.exceedStyle=t.exceedStyle},n.prototype.drawCircle=function(){var t=this.context;t.save(),t.beginPath(),t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.arc(this.h/2,this.h/2,this.h/2-5,0,2*Math.PI),t.stroke(),t.beginPath();var e=this.borderWidth<3?3-this.borderWidth:0,i=this.h/2-this.borderWidth-this.borderOffset-e;t.arc(this.h/2,this.h/2,i,0,2*Math.PI),this.background&&(t.fillStyle=this.background,t.fill()),t.restore(),t.clip()},n.prototype.drawSin=function(t){var e=this.context;e.save(),e.beginPath();var i=[];if(this.anime){100===this.startValue&&this.maxStyle&&this.maxStyle.color?e.fillStyle=this.maxStyle.color:this.startValue>100&&this.exceedStyle&&this.exceedStyle.color?e.fillStyle=this.exceedStyle.color:e.fillStyle=this.color;for(var s=0;s<this.w;s+=20/this.w){var n=this.startY+this.waveHeight*Math.sin(s*this.waveWidth*.01+t);i.push([s,n]),e.lineTo(s,n)}}else{100===this.value&&this.maxStyle&&this.maxStyle.color?e.fillStyle=this.maxStyle.color:this.value>100&&this.exceedStyle&&this.exceedStyle.color?e.fillStyle=this.exceedStyle.color:e.fillStyle=this.color;n=this.h*(1-this.value/100)+this.borderOffset;i.push([0,n]),e.lineTo(0,n),e.lineTo(this.w,n)}e.lineTo(this.w,this.h),e.lineTo(0,this.h),e.lineTo(i[0][0],i[0][1]),e.fill(),e.restore()},n.prototype.drawText=function(){var t=this.context;t.save();var e,i=this.textSize||this.w/2*.4;(t.font=i+"px Microsoft Yahei",t.textAlign="center",this.anime)?(100===this.startValue&&this.maxStyle&&this.maxStyle.text?(e=this.maxStyle.text,this.maxStyle.textColor&&(t.fillStyle=this.maxStyle.textColor)):this.startValue>100&&this.exceedStyle&&this.exceedStyle.text?(e=this.exceedStyle.text,this.exceedStyle.textColor&&(t.fillStyle=this.exceedStyle.textColor)):(e=~~this.startValue,t.fillStyle=this.textColor),t.fillText(e,this.w/2,this.h/2+i/2)):(100===this.value&&this.maxStyle&&this.maxStyle.text?(e=this.maxStyle.text,this.maxStyle.textColor&&(t.fillStyle=this.maxStyle.textColor)):this.value>100&&this.exceedStyle&&this.exceedStyle.text?(e=this.exceedStyle.text,this.exceedStyle.textColor&&(t.fillStyle=this.exceedStyle.textColor)):(e=~~this.value,t.fillStyle=this.textColor),t.fillText(e,this.w/2,this.h/2+i/2));t.restore()},n.prototype.stop=function(){this.id&&cancelAnimationFrame(this.id)};var a=function t(e){e.context.clearRect(0,0,e.w,e.h),e.startValue<e.value&&e.startValue++,e.startValue>e.value&&e.startValue--;var i=e.h*(1-e.value/100)+e.borderOffset;e.startY<i&&e.startY++,e.startY>i&&e.startY--,e.anime?(e.offsetX+=0,e.drawCircle(),e.drawSin(e.offsetX),e.drawText(),e.id=requestAnimationFrame(function(){t(e)})):(e.offsetX+=0,e.drawCircle(),e.drawSin(e.offsetX),e.drawText())};n.render=function(t){var e=new n(t);return a(e),e},n.prototype.update=function(t){void 0!==t?this.value=t:(this.w=this.canvas.width=s.width(this.wrapper),this.h=this.canvas.height=s.height(this.wrapper)),this.stop(),a(this)}}(window)},mounted:function(){var t={el:"canvas",value:this.number,borderOffset:10,color:"#f24141"};Hliquid.render(t)},methods:{}},r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"canvas"},[e("canvas",{attrs:{id:"canvas",width:"300",height:"300"}})])}]};var o=i("vSla")(a,r,!1,function(t){i("gO+l")},"data-v-20a98bc8",null).exports,l=i("t5DY"),h=i("L7Pj"),c=i.n(h),d={name:"Main",components:{Header:s.a,Loading:n.a,WaterPolo:o},data:function(){return{title:"首页",href:"login",jumpState:!0,alert:!0,current:0,num:40,score:80,userInfo:{},user_id:"",loading:!1,rankingList:[],userRanking:{},rankingItemH:68,PAGESTART:0,PAGECOUNT:9,loadList:!0,h:"",my:!0}},beforeRouteEnter:function(t,e,i){console.log(t),console.log(e);var s=sessionStorage.getItem("userInfo");i(function(t){s?i():t.$router.push({path:"login"})})},beforeRouteLeave:function(t,e,i){var s=this;console.log(t.path),console.log(e.path);console.log(this.userInfo),"/login"==t.path&&this.userInfo?(mui.confirm("是否退出登录","",["是","否"],function(t){console.log(t),t.index||(s.userInfo="",sessionStorage.removeItem("userInfo"),i())},"div"),i(!1)):i()},created:function(){console.log(this.$route.query);var t=sessionStorage.getItem("userInfo");t&&(this.userInfo=JSON.parse(t),this.user_id=this.userInfo.ID,this.PAGESTART=-1)},mounted:function(){var t=c()("html").css("fontSize").replace("px","");console.log(t),this.h=this.PAGECOUNT*this.rankingItemH/2/t+"rem",c()(".scroller-con").css("height",this.h),console.log(history)},methods:{pushHistory:function(){console.log(location.origin)},warning:function(){this.$router.go(-1)},alerts:function(t){t.index||this.$router.go(-1)},refresh:function(t){var e=this;setTimeout(function(){e.PAGESTART=-1,e.loadList=!0,e.rankingList=[],e.postList(t)},1500)},infinite:function(t){var e=this;setTimeout(function(){console.log("加载"),e.loadList?e.postList(t):t(!0)},1500)},postList:function(t){var e=this;this.PAGESTART++,l.a.getServerData({PAGESTART:this.PAGESTART*this.PAGECOUNT,PAGECOUNT:this.PAGECOUNT,user_id:this.user_id},"onlineExamination.action.examinationAction[getRankingList]",!0,function(i){console.log(i),console.log("PAGESTART:"+e.PAGESTART),i.rankingList?(e.PAGESTART?i.rankingList.length?i.rankingList.map(function(t){t.ID==i.userRanking.ID?(t.hasClass=1,e.my=!1):t.hasClass=0,e.rankingList.push(t)}):(val.ID==i.userRanking.ID?(i.rankingList.hasClass=1,e.my=!1):i.rankingList.hasClass=0,e.rankingList.push(i.rankingList)):(e.userRanking=i.userRanking,i.rankingList.map(function(t){t.ID==i.userRanking.ID?(t.hasClass=1,e.my=!1):t.hasClass=0}),e.rankingList=i.rankingList),t()):(e.loadList=!1,t(!0))})},toggleTab:function(t){console.log(t),this.current=t?1:0},goLink:function(t){console.log(this.userInfo),"increment"==t?this.$router.push({path:"answer"}):this.$router.push({path:"readAnswer"})}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("Header",{attrs:{title:t.title,href:t.href,jumpState:t.jumpState,alert:t.alert},on:{child:t.warning}}),t._v(" "),i("div",{staticClass:"main-content"},[i("div",{staticClass:"action flex"},[i("div",{staticClass:"user"},[t._v("欢迎回来，"+t._s(t.userInfo.NAME))]),t._v(" "),i("div",{staticClass:"tabber flex"},[i("div",{staticClass:"tab-item",class:[0==t.current?"active":""],on:{click:function(e){t.toggleTab(0)}}},[t._v("积分")]),t._v(" "),i("div",{staticClass:"tab-item",class:[1==t.current?"active":""],on:{click:function(e){t.toggleTab(1)}}},[t._v("排行榜")])])]),t._v(" "),i("div",{staticClass:"content"},[t.current?t._e():i("div",{staticClass:"tab-ctx"},[i("div",{staticClass:"bg"},[i("div",{staticClass:"bg-pos"},[i("span",[t._v(t._s(t.userInfo.INTEGRAL))])])])]),t._v(" "),t.current?i("div",{staticClass:"tab-ctx"},[t._m(0),t._v(" "),t.userRanking&&t.my?i("div",{staticClass:"wrapper-content active flex"},[i("div",{staticClass:"grid-item"},[t._v(t._s(t.userRanking.ROWNO))]),t._v(" "),i("div",{staticClass:"grid-item"},[t._v(t._s(t.userRanking.NAME))]),t._v(" "),i("div",{staticClass:"grid-item"},[t._v(t._s(t.userRanking.ACADEMY))]),t._v(" "),i("div",{staticClass:"grid-item"},[t._v(t._s(t.userRanking.INTEGRAL))])]):t._e(),t._v(" "),i("div",{staticClass:"scroller-con",style:{height:t.h}},[i("scroller",{ref:"my_scroller",attrs:{"on-refresh":t.refresh,"on-infinite":t.infinite,noDataText:"没有数据"}},[i("div",{staticClass:"wrapper-list",attrs:{id:"wrapper-list"}},t._l(t.rankingList,function(e,s){return i("div",{staticClass:"wrapper-content flex",class:[e.hasClass?"active":""]},[i("div",{staticClass:"grid-item"},[t._v(t._s(s+1))]),t._v(" "),i("div",{staticClass:"grid-item"},[t._v(t._s(e.NAME))]),t._v(" "),i("div",{staticClass:"grid-item"},[t._v(t._s(e.ACADEMY))]),t._v(" "),i("div",{staticClass:"grid-item"},[t._v(t._s(e.INTEGRAL))])])}))])],1)]):t._e()]),t._v(" "),i("div",{staticClass:"btn-group"},[i("button",{staticClass:"btn increment",on:{click:function(e){t.goLink("increment")}}},[t._v("参加活动")]),t._v(" "),i("button",{staticClass:"btn read",on:{click:function(e){t.goLink("read")}}},[t._v("查看题库")])])]),t._v(" "),t.loading?i("Loading"):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrapper-header flex"},[e("div",{staticClass:"grid-header"},[this._v("排名")]),this._v(" "),e("div",{staticClass:"grid-header"},[this._v("姓名")]),this._v(" "),e("div",{staticClass:"grid-header"},[this._v("学院")]),this._v(" "),e("div",{staticClass:"grid-header"},[this._v("积分")])])}]};var f=i("vSla")(d,u,!1,function(t){i("yzMU")},"data-v-5485ca34",null);e.default=f.exports},yzMU:function(t,e){}});
//# sourceMappingURL=5.b4e283e8fed6b0a4724a.js.map